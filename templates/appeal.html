<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title> Khiáº¿u náº¡i tÃ i khoáº£n bá»‹ khÃ³a - SolverViet</title>
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='logos/favicon.png') }}">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 min-h-screen text-gray-800 font-sans">

  <!-- Header -->
  <div class="bg-white py-6 shadow">
    <h1 class="text-3xl font-bold text-center text-red-600">KHIáº¾U Náº I KHÃ“A TÃ€I KHOáº¢N</h1>
  </div>

  <!-- Form Container -->
  <div class="max-w-3xl mx-auto mt-10 bg-white p-6 rounded-xl shadow-lg">
    <h2 class="text-xl font-bold text-red-600 mb-4 border-b border-red-300 pb-2">ğŸš« TÃ i khoáº£n cá»§a báº¡n Ä‘Ã£ bá»‹ khÃ³a?</h2>
    <a href="/login" class="inline-block mt-4 px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">â† Vá» trang Ä‘Äƒng nháº­p</a>

    <p class="text-sm text-gray-600 mb-6">
      Náº¿u báº¡n cho ráº±ng tÃ i khoáº£n cá»§a mÃ¬nh bá»‹ khÃ³a nháº§m hoáº·c khÃ´ng rÃµ lÃ½ do, hÃ£y Ä‘iá»n vÃ o biá»ƒu máº«u bÃªn dÆ°á»›i Ä‘á»ƒ chÃºng tÃ´i xem xÃ©t. 
      Äá»™i ngÅ© há»— trá»£ SolverViet sáº½ kiá»ƒm tra vÃ  pháº£n há»“i sá»›m nháº¥t cÃ³ thá»ƒ qua email cá»§a báº¡n.
    </p>

    {% if not success %}
    <form method="POST" action="/appeal" enctype="multipart/form-data">
        <input type="hidden" name="category" value="Khiáº¿u náº¡i tÃ i khoáº£n">


      <div class="mb-4">
        <label class="block text-sm font-semibold mb-1"> Há» vÃ  tÃªn *</label>
        <input type="text" name="full_name" required class="w-full p-3 rounded bg-gray-100 border border-gray-300">
      </div>

      <div class="mb-4">
        <label class="block text-sm font-semibold mb-1"> MÃ£ ID tÃ i khoáº£n SolverViet (náº¿u nhá»›)</label>
        <input type="text" name="user_id" placeholder="VD: d360e94a-..." class="w-full p-3 rounded bg-gray-100 border border-gray-300">
        <p class="text-xs italic text-gray-500 mt-1 mb-4">
        Náº¿u khÃ´ng nhá»› mÃ£ ID tÃ i khoáº£n, báº¡n cÃ³ thá»ƒ Ä‘iá»n tÃªn Ä‘Äƒng nháº­p, máº­t kháº©u báº¡n tá»«ng dÃ¹ng hoáº·c sá»‘ Ä‘iá»‡n thoáº¡i Ä‘á»ƒ chÃºng tÃ´i xÃ¡c minh nhanh hÆ¡n.
        </p>

      </div>
      <div class="mb-4">
            <label class="block text-sm font-semibold mb-1"> TÃªn Ä‘Äƒng nháº­p (náº¿u khÃ´ng nhá»› ID)</label>
            <input type="text" name="username" placeholder="TÃªn Ä‘Äƒng nháº­p báº¡n thÆ°á»ng dÃ¹ng" class="w-full p-3 rounded bg-gray-100 border border-gray-300">
            </div>

            <div class="mb-4">
            <label class="block text-sm font-semibold mb-1"> Máº­t kháº©u báº¡n tá»«ng dÃ¹ng (Æ°á»›c chá»«ng)</label>
            <input type="text" name="password_hint" placeholder="Nháº­p gáº§n Ä‘Ãºng máº­t kháº©u náº¿u nhá»›" class="w-full p-3 rounded bg-gray-100 border border-gray-300">
            </div>

            <div class="mb-4">
            <label class="block text-sm font-semibold mb-1"> Sá»‘ Ä‘iá»‡n thoáº¡i liÃªn há»‡ (náº¿u cÃ³)</label>
            <input type="text" name="phone" placeholder="VD: 0865..." class="w-full p-3 rounded bg-gray-100 border border-gray-300">
            </div>


      <div class="mb-4">
        <label class="block text-sm font-semibold mb-1"> Email nháº­n pháº£n há»“i *</label>
        <input type="email" name="email" required placeholder="your.email@example.com" class="w-full p-3 rounded bg-gray-100 border border-gray-300">
      </div>

      <div class="mb-4">
        <label class="block text-sm font-semibold mb-1"> Ná»™i dung khiáº¿u náº¡i *</label>
        <textarea name="message" rows="6" required placeholder="Vui lÃ²ng nÃªu rÃµ lÃ½ do báº¡n cho ráº±ng tÃ i khoáº£n bá»‹ khÃ³a nháº§m..." class="w-full p-3 rounded bg-gray-100 border border-gray-300"></textarea>
      </div>

      <div class="mb-4">
        <label class="block text-sm font-semibold mb-1"> ÄÃ­nh kÃ¨m hÃ¬nh áº£nh minh hoáº¡ (náº¿u cÃ³, tá»‘i Ä‘a 5 áº£nh)</label>
        <input type="file" id="image-input" name="images" accept="image/*" multiple class="w-full p-2 bg-gray-100 border border-gray-300 rounded" />
        <div id="image-preview" class="mt-2 flex flex-wrap gap-2"></div>
      </div>

      <div class="flex justify-end gap-4 mt-6">
        <button type="reset" class="bg-gray-200 hover:bg-gray-300 text-black px-6 py-2 rounded">Nháº­p láº¡i</button>
        <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded font-semibold">Gá»­i khiáº¿u náº¡i</button>
      </div>
    </form>
    {% else %}
    <div class="bg-green-100 text-green-800 p-6 mt-6 rounded-xl border border-green-300 text-center text-lg shadow">
   TrÆ°á»›c háº¿t, chÃºng tÃ´i xin gá»­i lá»i xin lá»—i chÃ¢n thÃ nh vá» sá»± báº¥t tiá»‡n báº¡n Ä‘ang gáº·p pháº£i.

  <br><br>
  Há»‡ thá»‘ng Ä‘Ã£ tiáº¿p nháº­n yÃªu cáº§u khiáº¿u náº¡i cá»§a báº¡n. Äá»™i ngÅ© SolverViet sáº½ kiá»ƒm tra ká»¹ lÆ°á»¡ng vÃ  pháº£n há»“i sá»›m nháº¥t qua Ä‘á»‹a chá»‰ email báº¡n Ä‘Ã£ cung cáº¥p.

  <br><br>
  ChÃºng tÃ´i luÃ´n trÃ¢n trá»ng má»i pháº£n há»“i vÃ  cam káº¿t mang Ä‘áº¿n tráº£i nghiá»‡m cÃ´ng báº±ng, minh báº¡ch cho táº¥t cáº£ ngÆ°á»i dÃ¹ng.

  <br><br>
  <a href="/login" class="inline-block mt-4 px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">â† Vá» trang Ä‘Äƒng nháº­p</a>
</div>
    {% endif %}
  </div>

  <footer class="text-center text-gray-600 text-sm mt-10 pb-6">
    <p>ğŸ“ Zalo há»— trá»£: <a href="tel:0865645752" class="text-blue-500">0865645752</a> | ğŸ“§ Email: <a href="mailto:phatth.viettel@gmail.com" class="text-blue-500">solverviet@gmail.com</a></p>
    <p class="mt-1">SolverViet &copy; 2025. All rights reserved.</p>
  </footer>

  <!-- JS preview áº£nh -->
  <script>
    const input = document.getElementById("image-input");
    const preview = document.getElementById("image-preview");
    let files = [];

    if (input) {
      input.addEventListener("change", () => {
        const selected = Array.from(input.files);
        const total = files.length + selected.length;

        if (total > 5) {
          alert("âŒ Báº¡n chá»‰ Ä‘Æ°á»£c gá»­i tá»‘i Ä‘a 5 áº£nh!");
          input.value = "";
          return;
        }

        selected.forEach(file => {
          if (!file.type.startsWith("image/")) return;

          const reader = new FileReader();
          reader.onload = e => {
            const wrapper = document.createElement("div");
            wrapper.className = "relative w-24 h-24 border rounded overflow-hidden";

            const img = document.createElement("img");
            img.src = e.target.result;
            img.className = "object-cover w-full h-full";

            const del = document.createElement("button");
            del.innerText = "âœ•";
            del.className = "absolute top-0 right-0 bg-red-500 text-white text-xs px-1 rounded-bl";
            del.onclick = () => {
              preview.removeChild(wrapper);
              files = files.filter(f => f !== file);
              updateInputFiles();
            };

            wrapper.appendChild(img);
            wrapper.appendChild(del);
            preview.appendChild(wrapper);

            files.push(file);
            updateInputFiles();
          };
          reader.readAsDataURL(file);
        });

        input.value = "";
      });

      function updateInputFiles() {
        const dataTransfer = new DataTransfer();
        files.forEach(f => dataTransfer.items.add(f));
        input.files = dataTransfer.files;
      }
    }
  </script>

</body>
</html>
