

<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>üë• Qu·∫£n l√Ω ng∆∞·ªùi d√πng</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<style>body { padding: 20px; background-color: #1e293b; color: #f1f5f9; font-family: 'Segoe UI', sans-serif; }
.table-container { overflow-x: auto; }
table { background-color: #334155; border-radius: 8px; overflow: hidden; }
th { background-color: #0f172a; color: #38bdf8; }
td { background-color: #000000; color: #f1f5f9; }
td input[type="text"] { width: 100%; background-color: #ffffff !important; border: 1px solid #475569; padding: 6px 8px; border-radius: 4px; font-size: 14px; color: #000000; font-family: 'Segoe UI', sans-serif; }
td input[type="text"]::placeholder { color: #94a3b8; font-style: italic; }
td input[type="text"]:focus { outline: none; border-color: #38bdf8; background-color: #0f172a; }
td input { width: 100%; border: none; background: transparent; color: white; }
td select { width: 100%; background-color: white; color: black; border: 1px solid black; border-radius: 4px; padding: 5px 8px; font-size: 14px; margin-top: 6px; font-family: 'Segoe UI', sans-serif; }
#searchInput { width: 300px; margin-bottom: 20px; background-color: #fafafa; color: white; border: 1px solid #000000; border-radius: 4px; padding: 5px 10px; }
.btn { padding: 5px 10px; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; }
.btn-outline-primary { background-color: transparent; color: #38bdf8; border: 1px solid #38bdf8; }
.btn-outline-primary:hover { background-color: #38bdf8; color: #0f172a; }
.btn-secondary { background-color: #475569; color: white; }
.online { color: #4ade80; font-weight: bold; }
.offline { color: #94a3b8; }
.badge { border-radius: 6px; padding: 6px 10px; font-size: 13px; display: inline-block; }
.badge-green { background-color: #22c55e; color: #fff; }
.badge-yellow { background-color: #eab308; color: #000; }
.badge-red { background-color: #ef4444; color: #fff; }
.card-box { background-color: #1e293b; border: 1px solid #475569; color: #f8fafc; border-radius: 10px; padding: 10px 15px; margin: 5px; }
#searchInput{ width:300px; margin-bottom:20px; background:#0f172a !important; color:#e5e7eb !important; border:1px solid #334155 !important; border-radius:10px; padding:10px 14px; caret-color:#22d3ee; transition:border-color .2s, box-shadow .2s, background .2s; }
#searchInput::placeholder{ color:#94a3b8; opacity:.9; }
#searchInput:focus{ outline:none; background:#0b1324 !important; border-color:#22d3ee !important; box-shadow:0 0 0 3px rgba(34,211,238,.25); }
</style>


</head>
<body>
  <a href="/solverviet_control_x2025" class="btn btn-secondary mb-3">
  ‚¨ÖÔ∏è Quay v·ªÅ ƒëi·ªÅu h∆∞·ªõng
</a>


<div class="d-flex justify-content-between align-items-center mb-4">
  <h2>üë• Qu·∫£n l√Ω ng∆∞·ªùi d√πng</h2>
  <div>
    <button class="btn btn-outline-secondary me-2" onclick="showNote()">üìò Ghi ch√∫</button>
<button id="refreshBtn" class="btn btn-sm btn-outline-primary" onclick="reloadNow()">
  üîÑ L√†m m·ªõi b·∫£ng
</button>
  </div>
</div>

<div class="row mt-2 mb-4">
  <!-- üë• T·ªïng -->
  <div class="col-md-2 mb-2">
    <div class="card text-center shadow-sm border-0" style="background-color: #e3f2fd;">
      <div class="card-body p-2">
        <div class="text-muted small">üë• T·ªïng</div>
        <div class="fw-bold fs-5 text-primary" id="stat-total">{{ stats.total }}</div>
      </div>
    </div>
  </div>

  <!-- üü¢ Online -->
  <div class="col-md-2 mb-2">
    <div class="card text-center shadow-sm border-0" style="background-color: #e8f5e9;">
      <div class="card-body p-2">
        <div class="text-muted small">üü¢ Online</div>
        <div class="fw-bold fs-5 text-success" id="stat-online">{{ stats.active }}</div>
      </div>
    </div>
  </div>

  <!-- ‚ö° G√≥i GPT -->
  <div class="col-md-2 mb-2">
    <div class="card text-center shadow-sm border-0" style="background-color: #e0f7fa;">
      <div class="card-body p-2">
        <div class="text-muted small">‚ö° G√≥i GPT</div>
        <div class="fw-bold fs-5 text-info" id="stat-gpt">{{ stats.gpt }}</div>
      </div>
    </div>
  </div>

  <!-- üö´ B·ªã ch·∫∑n -->
  <div class="col-md-2 mb-2">
    <div class="card text-center shadow-sm border-0" style="background-color: #ffebee;">
      <div class="card-body p-2">
        <div class="text-muted small">üö´ B·ªã ch·∫∑n</div>
        <div class="fw-bold fs-5 text-danger" id="stat-blocked">{{ stats.blocked }}</div>
      </div>
    </div>
  </div>

  <!-- üî• >100 l∆∞·ª£t GPT h√¥m nay -->
  <div class="col-md-4 mb-2">
    <div class="card text-center shadow-sm border-0" style="background-color: #fff3e0;">
      <div class="card-body p-2">
        <div class="text-muted small">üî• >100 l∆∞·ª£t GPT h√¥m nay</div>
        <div class="fw-bold fs-5" style="color:#ff9900" id="stat-heavy">{{ stats.heavy }}</div>
      </div>
    </div>
  </div>

  <!-- üß† S·ªë l∆∞·ª£t SLV h√¥m nay -->
  <div class="col-md-4 mb-2">
    <div class="card text-center shadow-sm border-0" style="background-color: #fffde7;">
      <div class="card-body p-2">
        <div class="text-muted small">üß† S·ªë l∆∞·ª£t SLV h√¥m nay</div>
        <div class="fw-bold fs-5 text-warning" id="stat-slv">{{ stats_today.slv_count }}</div>
      </div>
    </div>
  </div>

  <!-- üí° S·ªë l∆∞·ª£t AI Lite h√¥m nay -->
  <div class="col-md-4 mb-2">
    <div class="card text-center shadow-sm border-0" style="background-color: #e8f5e9;">
      <div class="card-body p-2">
        <div class="text-muted small">üí° S·ªë l∆∞·ª£t AI Lite h√¥m nay</div>
        <div class="fw-bold fs-5 text-success" id="stat-lite">{{ stats_today.lite_count }}</div>
      </div>
    </div>
  </div>

  <!-- üìä T·ªïng l∆∞·ª£t d√πng AI h√¥m nay -->
  <div class="col-md-4 mb-2">
    <div class="card text-center shadow-sm border-0" style="background-color: #e3f2fd;">
      <div class="card-body p-2">
        <div class="text-muted small">üìä T·ªïng l∆∞·ª£t d√πng AI h√¥m nay</div>
        <div class="fw-bold fs-5 text-primary" id="stat-total-ai">
          {{ stats_today.slv_count + stats_today.lite_count }}
        </div>
      </div>
    </div>
  </div>
</div>



<form class="d-flex mb-3" onsubmit="return false;">
<!-- N√∫t kho√° -->


  <input id="searchInput" name="search" class="form-control me-2" type="text"
         placeholder=" T√¨m theo t√™n v√† ID" value="{{ search or '' }}">
  <button class="btn btn-primary" type="submit">T√¨m</button>
</form>
<div id="quota-alert-box">
  {% include 'admin/_quota_alert_partial.html' %}
</div>


<table class="table table-bordered table-hover align-middle text-center" id="userTable">
{% set needing_manual_block = users | selectattr("quota_alert", "equalto", true) | list %}
{% if needing_manual_block | length > 0 %}
  <div class="alert alert-danger">
    ‚ö†Ô∏è M·ªôt s·ªë ng∆∞·ªùi d√πng ƒë√£ v∆∞·ª£t qu√° gi·ªõi h·∫°n SLV/ng√†y. Vui l√≤ng ki·ªÉm tra!
  </div>
{% endif %}


  <thead class="table-dark">
  <tr>
    <th class="text-nowrap">STT</th>
    <th class="text-nowrap">T√™n t√†i kho·∫£n</th>
    <th class="text-nowrap">H·ªç t√™n</th>
    <th class="text-nowrap">T√≠nh c√°ch AI</th>
    <th class="text-nowrap">ID</th>
    <th class="text-nowrap">M√£ gi·ªõi thi·ªáu</th> 
    <th class="text-nowrap">H·∫°n SOLVER</th>
    <th class="text-nowrap">H·∫°n LITE</th>
    <th class="text-nowrap">S·ªë l∆∞·ª£t GPT c√≤n</th>
    <th class="text-nowrap">S·ªë l∆∞·ª£t Lite</th>
    <th class="text-nowrap">Tr·∫°ng th√°i</th>
    <th class="text-nowrap" style="width: 80px;">L∆∞u</th>
    <th>Ch·∫∑n</th>
    <th class="text-nowrap" style="width: 90px;">Kho√° / M·ªü</th>
 

  </tr>
</thead>
  <tbody>
    {% for info in users %}
<tr 
  data-username="{{ info.username | lower }}" 
  data-fullname="{{ info.fullname | lower }}" 
  data-userid="{{ info.user_id | lower }}"
>
  <td>{{ loop.index + ((pagination.page - 1) * pagination.per_page) }}</td>

  <!-- Form c·∫≠p nh·∫≠t (g√≥i g·ªçn ƒë√∫ng trong td c·∫ßn) -->
  <td>
    <form method="POST" action="/admin_users/update" class="d-flex flex-column gap-1">
      <input type="hidden" name="username" value="{{ info.username }}">
      {{ info.username }}
  </td>

<td>{{ info.fullname or "Kh√¥ng c√≥" }}</td>
<td>{{ info.ai_personality }}</td>

<td>{{ info.user_id or "Kh√¥ng c√≥" }}</td>
<td>{{ info.referral_code or "‚Äî" }}</td>

<td>
  <input type="text" name="vip_gpt" value="{{ info.vip_gpt_display or '' }}" placeholder="yyyy-mm-dd hh:mm:ss">
  <select name="vip_gpt_type">
    <option value="">Kh√¥ng c√≥</option>
    <option value="5day" {% if info.vip_gpt == "5day" %}selected{% endif %}>5 ng√†y</option>
    <option value="15day" {% if info.vip_gpt == "15day" %}selected{% endif %}>15 ng√†y</option>
    <option value="30day" {% if info.vip_gpt == "30day" %}selected{% endif %}>30 ng√†y</option>
  </select>
</td>

<td>
  <input type="text" name="vip_lite" value="{{ info.vip_lite_display or '' }}" placeholder="yyyy-mm-dd hh:mm:ss">
  <select name="vip_lite_type">
    <option value="none" {% if not info.vip_lite_display or info.vip_lite_display == "Kh√¥ng c√≥" %}selected{% endif %}>Kh√¥ng c√≥</option>
    <option value="7day">7 ng√†y</option>
  </select>
</td>

<td data-quota>
  {% if info.gpt_quota %}
    <div>
      <b>{{ info.gpt_quota }}</b>
    </div>
    {% if info.gpt_usage_today is not none and info.vip_gpt in ["5day", "15day", "30day"] %}
      <div style="font-size:12px;color:#888;">ƒê√£ d√πng: {{ info.gpt_usage_today }}</div>
    {% endif %}
  {% else %}
    <span class="text-muted">Kh√¥ng c√≥</span>
  {% endif %}
</td>

<td data-lite>
  {% if info.lite_remaining != "Kh√¥ng c√≥" %}
    <div><b>{{ info.lite_remaining }}</b></div>
    {% if info.lite_usage is not none %}
      <div style="font-size:12px;color:#888;">ƒê√£ d√πng: {{ info.lite_usage }}</div>
    {% endif %}
  {% else %}
    <span class="text-muted">Kh√¥ng c√≥</span>
  {% endif %}
</td>

  <td>
    {% if info.online %}
      <span class="online">ƒêang ho·∫°t ƒë·ªông</span>
    {% else %}
      <span class="offline">Ngo·∫°i tuy·∫øn</span>
    {% endif %}
  </td>

  <td>
    <button type="submit" class="btn btn-sm btn-outline-primary">L∆∞u</button>
    </form> <!-- ‚úÖ ƒê√≥ng form update t·∫°i ƒë√¢y -->
  </td>

<td data-action>
  {% if info.over_quota_block %}
    {% set dt = info.over_quota_block_at %}
    <span class="text-danger">
  üö´ ƒê√£ auto ch·∫∑n l√∫c 
  {% if dt %}{{ dt.strftime('%Y-%m-%d %H:%M:%S') }}{% else %}kh√¥ng r√µ th·ªùi gian{% endif %}
</span>

    <form method="POST" action="/admin_users/block_chat_quota" style="display:inline;">
      <input type="hidden" name="username" value="{{ info.username }}">
      <input type="hidden" name="block_chat" value="0">
      <button type="submit" class="btn btn-sm btn-outline-secondary mt-1">G·ª° ch·∫∑n</button>
    </form>

  {% elif info.quota_alert %}
    <form method="POST" action="/admin_users/block_chat_quota" style="display:inline;" class="auto-block-form">
      <input type="hidden" name="username" value="{{ info.username }}">
      <input type="hidden" name="block_chat" value="1">
      <button type="submit" class="btn btn-sm btn-warning">Ch·∫∑n chat</button>
      <label class="ms-2" style="font-size: 12px;">
        <input type="checkbox" class="auto-block-checkbox" data-username="{{ info.username }}">
        T·ª± ƒë·ªông
      </label>
    </form>

  {% else %}
    <span class="text-muted">‚Äî</span>
  {% endif %}
</td>



  <!-- Kho√°/m·ªü user -->
  <td>
    <form method="POST" action="/admin_users/toggle_block">
      <input type="hidden" name="username" value="{{ info.username }}">
      {% if info.is_blocked %}
        <button type="submit" class="btn btn-sm btn-success">M·ªü kho√°</button>
      {% else %}
        <button type="submit" class="btn btn-sm btn-danger">Kho√°</button>
      {% endif %}
    </form>
  </td>
</tr>

    {% endfor %}
  </tbody>
</table>



<!-- PH√ÇN TRANG -->
{% if pagination.pages > 1 %}
<div class="d-flex justify-content-center mt-4">
  <nav>
    <ul class="pagination">
      {% if pagination.has_prev %}
        <li class="page-item">
          <a class="page-link" href="{{ url_for('admin_users', page=pagination.prev_num, search=search) }}">¬´</a>

        </li>
      {% endif %}

      {% for p in range(1, pagination.pages + 1) %}
        <li class="page-item {% if p == pagination.page %}active{% endif %}">
          <a class="page-link" href="{{ url_for('admin_users', page=p, search=search) }}">{{ p }}</a>

        </li>
      {% endfor %}

      {% if pagination.has_next %}
        <li class="page-item">
          <a class="page-link" href="{{ url_for('admin_users', page=pagination.next_num, search=search) }}">¬ª</a>

        </li>
      {% endif %}
    </ul>
  </nav>
</div>
{% endif %}

    </form>
  </div>

<script>
  const searchInput = document.getElementById("searchInput");
  searchInput.addEventListener("input", function () {
    const keyword = this.value.trim().toLowerCase();
    const rows = document.querySelectorAll("#userTable tbody tr");

    rows.forEach(row => {
      const username = row.getAttribute("data-username") || "";
      const fullname = row.getAttribute("data-fullname") || "";
      const userid = row.getAttribute("data-userid") || "";

      const match = username.includes(keyword) || fullname.includes(keyword) || userid.includes(keyword);
      row.style.display = match ? "" : "none";
    });
  });
</script>

<script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
<script>
const socket = io();

// Tham gia room admin khi l√† admin
socket.emit("join_admin");

socket.on("user_usage_update", function(data) {
   const row = document.querySelector(`[data-userid="${data.user_id}"]`);
  if (!row) return;

  // üéØ 1. C·∫≠p nh·∫≠t quota GPT

  const quotaCell = row.querySelector("[data-quota]");
  if (quotaCell) {
    let quotaText = "<span class='text-muted'>Kh√¥ng c√≥</span>";
    let usage = data.gpt_usage || 0;

    if (data.vip_gpt === "5day") {
      quotaText = `<strong>${100 - usage}/100</strong>`;
    } else if (["15day", "30day"].includes(data.vip_gpt)) {
      quotaText = `<strong>${200 - usage}/200</strong>`;
    }

    quotaCell.innerHTML = `
      ${quotaText}
      <br><small class="text-muted">ƒê√£ d√πng: ${usage}</small>
    `;
  }

  // üéØ 2. C·∫≠p nh·∫≠t quota Lite n·∫øu c√≥
  const liteCell = row.querySelector("[data-lite]");
  if (liteCell) {
    if (data.vip_lite) {
      const liteLimit = 50;
      const liteRemain = liteLimit - (data.lite_usage || 0);
      liteCell.textContent = `${liteRemain}/${liteLimit}`;
    } else {
      liteCell.textContent = "Kh√¥ng c√≥";
    }
  }
    // üéØ 3. C·∫≠p nh·∫≠t v√πng Ch·∫∑n chat
   // üéØ 3. C·∫≠p nh·∫≠t v√πng Ch·∫∑n chat
const actionCell = row.querySelector("[data-action]");
if (actionCell) {
  if (data.over_quota_block) {
    let blockedTime = "kh√¥ng r√µ th·ªùi gian";
    if (data.over_quota_block_at) {
      const dt = new Date(data.over_quota_block_at);
      blockedTime = dt.toLocaleString("vi-VN", { hour12: false });
    }

    actionCell.innerHTML = `
      <span class="text-danger">
        üö´ ƒê√£ auto ch·∫∑n l√∫c ${blockedTime}
      </span>
      <form method="POST" action="/admin_users/block_chat_quota" style="display:inline;">
        <input type="hidden" name="username" value="${data.username}">
        <input type="hidden" name="block_chat" value="0">
        <button type="submit" class="btn btn-sm btn-outline-secondary mt-1">G·ª° ch·∫∑n</button>
      </form>
    `;
  } else if (data.quota_alert) {
    actionCell.innerHTML = `
      <form method="POST" action="/admin_users/block_chat_quota" style="display:inline;" class="auto-block-form">
        <input type="hidden" name="username" value="${data.username}">
        <input type="hidden" name="block_chat" value="1">
        <button type="submit" class="btn btn-sm btn-warning">Ch·∫∑n chat</button>
        <label class="ms-2" style="font-size: 12px;">
          <input type="checkbox" class="auto-block-checkbox" data-username="${data.username}" checked>
          T·ª± ƒë·ªông
        </label>
      </form>
    `;

    const cb = actionCell.querySelector(".auto-block-checkbox");
    if (cb) {
      cb.addEventListener("change", () => {
        const form = cb.closest("form");
        if (cb.checked && form) {
          form.submit();
        }
      });

      // üî• CH√çNH ƒê√ÇY: N·∫øu ƒë√£ check s·∫µn th√¨ submit lu√¥n
      if (cb.checked) {
        const form = cb.closest("form");
        if (form) form.submit();
      }
    }

  } else {
    actionCell.innerHTML = `<span class="text-muted">‚Äî</span>`;
  }
}
  // üéØ 4. C·∫≠p nh·∫≠t b·∫£ng alert n·∫øu c√≥ ch·∫∑n/quota
  if (data.over_quota_block || data.gpt_usage >= 200) {
    fetch("/admin_users/quota_alert")
      .then(res => res.text())
      .then(html => {
        const alertBox = document.getElementById("quota-alert-box");
        if (alertBox) alertBox.innerHTML = html;
      });
  }

});
</script>


  <script>
  const countTarget = {{ user_count }};
  const display = document.getElementById("userCountDisplay");
  let current = 0;

  const animate = setInterval(() => {
    if (current < countTarget) {
      current++;
      display.textContent = current;
    } else {
      clearInterval(animate);
    }
  }, 15);  // t·ªëc ƒë·ªô tƒÉng (ms)
</script>
<script>
function animateNumber(id, target) {
  const el = document.getElementById(id);
  if (!el) return;
  let current = 0;
  const interval = setInterval(() => {
    current += Math.ceil((target - current) / 5);
    if (current >= target) {
      el.textContent = target;
      clearInterval(interval);
    } else {
      el.textContent = current;
    }
  }, 40);
}

window.addEventListener("DOMContentLoaded", () => {
  animateNumber("stat-total", {{ stats.total }});
  animateNumber("stat-online", {{ stats.active }});
  animateNumber("stat-gpt", {{ stats.gpt }});
  animateNumber("stat-blocked", {{ stats.blocked }});
  animateNumber("stat-heavy", {{ stats.heavy }});
  animateNumber("stat-slv", {{ stats_today.slv_count }});
  animateNumber("stat-lite", {{ stats_today.lite_count }});
  animateNumber("stat-total-ai", {{ stats_today.slv_count + stats_today.lite_count }});
});
</script>
<script>
document.querySelectorAll(".auto-block-checkbox").forEach(cb => {
  cb.addEventListener("change", () => {
    if (cb.checked) {
      const form = cb.closest("form");
      if (form) form.submit();
    }
  });
});

</script>
<script>
function showNote() {
  document.getElementById("noteModal").style.display = "flex";
}
function hideNote() {
  document.getElementById("noteModal").style.display = "none";
}
</script>
<!-- Ghi ch√∫ h∆∞·ªõng d·∫´n -->
<div id="noteModal" class="modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%;
    background:rgba(0,0,0,0.5); z-index:9999; justify-content:center; align-items:center;">
  <div style="max-width:600px; width:90%; background-color:#111827; color:white; padding:20px; border-radius:8px; box-shadow: 0 0 10px #000;">
    <h5 style="color: #38bdf8;">üìò Ghi ch√∫ d√†nh cho qu·∫£n tr·ªã vi√™n</h5>
    <ul style="font-size: 14px;">
      <li><b>üîç C√°ch t√¨m ng∆∞·ªùi d√πng trong giao di·ªán:</b>
        <ul>
          <li>D√πng √¥ t√¨m ki·∫øm ƒë·ªÉ l·ªçc theo <code>username</code>, <code>fullname</code> ho·∫∑c <code>user_id</code></li>
          <li>T√¨m m·ªôt ph·∫ßn t√™n ho·∫∑c ID ƒë·ªÅu ƒë∆∞·ª£c (kh√¥ng ph√¢n bi·ªát hoa th∆∞·ªùng)</li>
        </ul>
      </li>
      <li><b>‚úèÔ∏è C√°ch thay th·∫ø t√™n trong c√¢u l·ªánh SQL:</b>
        <ul>
          <li>Trong c√¢u nh∆∞:
            <code>SELECT * FROM users WHERE username = 't√™n';</code>
            ‚Üí thay <code>'t√™n'</code> b·∫±ng t√™n th·ª±c t·∫ø nh∆∞ <code>'admin123'</code>
          </li>
          <li>D√πng to√°n t·ª≠ <code>ILIKE</code> ƒë·ªÉ t√¨m kh√¥ng ph√¢n bi·ªát hoa th∆∞·ªùng, c√≥ th·ªÉ d√πng k√Ω t·ª± %:
            <br>
            <code>SELECT * FROM users WHERE fullname ILIKE '%ph√°t%';</code>
          </li>
          <li>Khi t√¨m theo ID UUID, ph·∫£i d√°n nguy√™n chu·ªói:
            <code>SELECT * FROM users WHERE user_id = '1a2b3c-xyz...';</code>
          </li>
        </ul>
      </li>
      <li><b>üß® C√¢u l·ªánh xo√° d·ªØ li·ªáu (c·ª±c k·ª≥ c·∫©n th·∫≠n):</b>
        <ul>
          <li>Xo√° 1 ng∆∞·ªùi d√πng:
            <code>DELETE FROM users WHERE username = 'abc';</code>
          </li>
          <li>Xo√° to√†n b·ªô user (kh√¥ng ho√†n t√°c):
            <code>DELETE FROM users;</code>
          </li>
          <li>Xo√° 1 c·ªôt (column) kh·ªèi b·∫£ng:
            <code>ALTER TABLE users DROP COLUMN ai_personality;</code>
          </li>
          <li>Xo√° nguy√™n b·∫£ng (c·∫©n th·∫≠n!):
            <code>DROP TABLE users;</code>
          </li>
        </ul>
        <div style="font-size: 13px; color: #f87171;">
          ‚ö†Ô∏è H√£y sao l∆∞u database tr∆∞·ªõc khi xo√°. C√°c l·ªánh tr√™n KH√îNG th·ªÉ ho√†n t√°c n·∫øu th·ª±c hi·ªán sai!
        </div>
      </li>
      <li><b>üíæ L∆∞u ch·ªânh s·ª≠a nhanh trong b·∫£ng:</b>
        <ul>
          <li>G√µ ng√†y h·∫°n g√≥i GPT/LITE xong ‚Üí b·∫•m <b>L∆∞u</b> ho·∫∑c nh·∫•n <kbd>Ctrl</kbd> + <kbd>S</kbd> ƒë·ªÉ g·ª≠i</li>
          <li>ƒê·∫£m b·∫£o ƒë·ªãnh d·∫°ng: <code>YYYY-MM-DD HH:MM:SS</code></li>
        </ul>
      </li>
      <li><b>‚ö†Ô∏è C·∫©n th·∫≠n khi thao t√°c:</b>
        <ul>
          <li>Kh√¥ng xo√° user th·ªß c√¥ng tr·ª´ khi x√°c minh r√µ r√†ng</li>
          <li>Khi ng∆∞·ªùi d√πng v∆∞·ª£t quota GPT ‚Üí c√≥ th·ªÉ b·∫•m ‚ÄúCh·∫∑n chat‚Äù ƒë·ªÉ ng·∫Øt k·∫øt n·ªëi</li>
          <li>G√≥i GPT <code>5day</code> c√≥ 100 l∆∞·ª£t/ng√†y; g√≥i <code>15day</code>/<code>30day</code> c√≥ 200 l∆∞·ª£t/ng√†y</li>
        </ul>
      </li>
      <li><b>üß† M·ªôt s·ªë tr∆∞·ªùng ƒë·∫∑c bi·ªát:</b>
        <ul>
          <li><code>ai_personality</code>: T√≠nh c√°ch AI ng∆∞·ªùi d√πng ƒë√£ ch·ªçn</li>
          <li><code>gpt_usage_today</code>: S·ªë l∆∞·ª£t GPT ƒë√£ d√πng h√¥m nay</li>
          <li><code>over_quota_block</code>: C√≥ b·ªã ch·∫∑n do v∆∞·ª£t quota kh√¥ng</li>
        </ul>
      </li>
      <li style="color: #cbd5e1; font-style: italic;">
        ‚ÑπÔ∏è <b>Ghi ch√∫:</b> N·∫øu mu·ªën ƒë·ªïi t·ª´ <code>SLV</code> qua <code>Lite</code> ho·∫∑c ng∆∞·ª£c l·∫°i th√¨ c·∫ßn b·∫•m v√†o √¥ input ch·ªØ <b>"Kh√¥ng c√≥"</b> v√† nh·∫≠p th·ªß c√¥ng r·ªìi m·ªõi chuy·ªÉn ƒë∆∞·ª£c.
      </li>
    </ul>
    <div class="text-end mt-3" style="text-align: right;">
      <button class="btn btn-secondary btn-sm" onclick="hideNote()">ƒê√≥ng</button>
    </div>
  </div>
</div>


<script>
function reloadNow() {
  const btn = document.getElementById("refreshBtn");
  btn.innerText = "ƒêang l√†m m·ªõi...";
  btn.disabled = true;
  window.location.href = window.location.href;
}
</script>
</body>
</html>
