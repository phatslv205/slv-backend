window.addEventListener("DOMContentLoaded", () => { showMarketingPopup(); }); function showMarketingPopup() { document.getElementById("popup-marketing").style.display = "block"; } function closeMarketingPopup() { document.getElementById("popup-marketing").style.display = "none"; } function openRewardPopup() { document.getElementById("reward-popup").style.display = "flex"; } function closeRewardPopup() { document.getElementById("reward-popup").style.display = "none"; } function saveRewardInfo() { const fullname = document.getElementById("reward-fullname").value.trim(); const stk = document.getElementById("reward-stk").value.trim(); const bank = document.getElementById("reward-bank").value.trim(); if (!fullname || !stk || !bank) { showToast("⚠️ Vui lòng điền đầy đủ thông tin."); return; } fetch("/save_reward_info", { method: "POST", headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ fullname, stk, bank }) }) .then(res => res.json()) .then(data => { if (data.success) { showToast("✅ Đã lưu thông tin nhận thưởng!"); closeRewardPopup(); } else { showToast("❌ Lưu thất bại. Vui lòng thử lại."); } }) .catch(err => { console.error(err); showToast("❌ Có lỗi xảy ra."); }); } function showToast(message) { const toast = document.getElementById("toast-message"); toast.innerText = message; toast.style.opacity = "1"; toast.style.transform = "translateY(0)"; setTimeout(() => { toast.style.opacity = "0"; toast.style.transform = "translateY(100px)"; }, 3000); }