const input=document.getElementById("image-input"),preview=document.getElementById("image-preview");let files=[];if(input){input.addEventListener("change",()=>{const selected=Array.from(input.files),total=files.length+selected.length;if(total>5){alert("❌ Bạn chỉ được gửi tối đa 5 ảnh!");input.value="";return}selected.forEach(file=>{if(!file.type.startsWith("image/"))return;const reader=new FileReader();reader.onload=e=>{const wrapper=document.createElement("div");wrapper.className="relative w-24 h-24 border rounded overflow-hidden";const img=document.createElement("img");img.src=e.target.result;img.className="object-cover w-full h-full";const del=document.createElement("button");del.innerText="✕";del.className="absolute top-0 right-0 bg-red-500 text-white text-xs px-1 rounded-bl";del.onclick=()=>{preview.removeChild(wrapper);files=files.filter(f=>f!==file);updateInputFiles()};wrapper.appendChild(img);wrapper.appendChild(del);preview.appendChild(wrapper);files.push(file);updateInputFiles()};reader.readAsDataURL(file)});input.value=""});function updateInputFiles(){const dataTransfer=new DataTransfer();files.forEach(f=>dataTransfer.items.add(f));input.files=dataTransfer.files}}