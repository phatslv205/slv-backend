body{margin:0;font-family:'Segoe UI',sans-serif;background-color:#1e1e1e;color:white;display:flex;flex-direction:column;height:100vh}header{background-color:#009688;padding:15px;font-size:18px;font-weight:bold;display:flex;align-items:center;justify-content:space-between;color:white;box-shadow:0 2px 10px rgba(0,0,0,0.4)}#back-btn{background:none;border:1px solid white;color:white;padding:5px 10px;border-radius:6px;cursor:pointer}#chat-container{flex:1;display:flex;flex-direction:column;padding:12px;overflow-y:auto}.message{max-width:70%;padding:12px 16px;border-radius:18px;margin:6px 0;display:inline-block;line-height:1.5;box-shadow:0 1px 4px rgba(0,0,0,0.3);animation:slideIn 0.2s ease-in-out}.user{background-color:#0084ff;color:white;align-self:flex-end;border-bottom-right-radius:4px}@keyframes slideIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.block{margin:16px 0;padding:12px 16px;border-radius:10px;background-color:#2b2b2b;line-height:1.6;box-shadow:0 0 4px rgba(0,0,0,0.3)}.block.formula{border-left:5px solid #5fa8d3}.block.quick{border-left:5px solid #4caf50;background-color:#1d331d}.block.full{border-left:5px solid #9c27b0;background-color:#251a2b}.block b{color:#fff;font-size:16px}.dot:nth-child(1){animation-delay:0s}.dot:nth-child(2){animation-delay:0.2s}.dot:nth-child(3){animation-delay:0.4s}@keyframes fadeInUp{0%{opacity:0;transform:translateY(10px)}100%{opacity:1;transform:translateY(0)}}.message.bot{background-color:transparent;color:#000;align-self:flex-start;border-radius:0;box-shadow:none;animation:fadeInUp 0.25s ease-out;padding:8px 4px;margin:12px 0;max-width:90%;font-size:15px;line-height:1.7}.dot{animation:blink 1.2s infinite;font-weight:bold}@keyframes blink{0%{opacity:0.2}50%{opacity:1}100%{opacity:0.2}}.alert{animation:slideUp 0.6s ease;color:orange;font-size:14px;text-align:center;margin-top:6px}@keyframes slideUp{from{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}.chat-bar{max-width:700px;width:100%;display:flex;align-items:center;background-color:#2a2b32;border-radius:999px;padding:12px 20px;margin:auto}.chat-bar input{flex-grow:1;background:transparent;border:none;outline:none;color:white;font-size:16px}.chat-bar button{background:none;border:none;color:rgb(82,79,79);margin-left:10px;cursor:pointer}.chat-bar i{width:20px;height:20px}.logo-section{display:flex;align-items:center;gap:10px}.brand-name{font-size:25px;font-weight:bold;color:#00aaff;margin-left:10px;letter-spacing:1px}.highlight{color:#ffc107}#back-btn{display:flex;align-items:center;gap:6px;background-color:transparent;border:1px solid white;color:white;padding:6px 12px;border-radius:8px;cursor:pointer;transition:background-color 0.2s ease}#back-btn:hover{background-color:rgba(255,255,255,0.1)}.plus-container{position:relative}.plus-menu{display:none;position:absolute;bottom:50px;left:0;min-width:220px;background-color:#2e2e2e;padding:10px;border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,0.5);z-index:10}.plus-menu button{display:flex;align-items:center;background:none;border:none;color:white;gap:12px;padding:10px 16px;cursor:pointer;width:100%;font-size:15px;transition:background-color 0.2s}.plus-menu button:hover{background-color:#444;border-radius:6px}#image-preview img{max-height:60px;border-radius:6px;margin-top:4px}#file-preview{align-items:center;margin-top:4px}@keyframes mic-pulse{0%{box-shadow:0 0 0 0 rgba(0,230,118,0.7)}70%{box-shadow:0 0 0 12px rgba(0,230,118,0)}100%{box-shadow:0 0 0 0 rgba(0,230,118,0)}}#mic-wrapper.active{animation:mic-pulse 1.2s infinite;border:2px solid #00e676}.chat-notice{background-color:#2a2a2a;color:#d0d0d0;padding:10px 14px;margin-top:12px;border-left:5px solid #00c4ff;border-radius:8px;font-size:15px;font-weight:500;line-height:1.6;text-align:center}.chat-notice span{color:#00c4ff;font-weight:600;cursor:pointer;text-decoration:underline}.chat-notice span:hover{color:#00e0ff;text-shadow:0 0 4px #00e0ff}.message-actions{margin-top:6px;padding:6px 10px;background-color:#262626;border-radius:999px;display:inline-flex;gap:10px;align-items:center;font-size:17px;box-shadow:0 0 2px rgba(255,255,255,0.1)}.copy-btn{background-color:#2e2e2e;border:none;padding:5px 8px;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background-color 0.2s ease;margin-right:0}.copy-btn:hover{background-color:#4e4e4e;transform:scale(1.05)}.copy-btn svg{width:18px;height:18px;stroke:#00bcd4;stroke-width:2}.copy-btn:hover svg{stroke:white}.copy-btn:hover{background-color:#555;transform:scale(1.08);box-shadow:0 0 6px rgba(255,255,255,0.2)}.image-viewer-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.85);display:flex;justify-content:center;align-items:center;z-index:1000;display:none}.image-viewer-overlay img{max-width:90%;max-height:90%;box-shadow:0 0 12px rgba(255,255,255,0.6)}#send-btn{background:none;border:none;cursor:pointer;padding:8px;border-radius:12px;transition:transform 0.1s ease-in-out}#send-btn:hover{transform:scale(1.1);background-color:rgba(0,230,255,0.1)}
body{
  margin:0;font-family:'Segoe UI',sans-serif;
  background:#1e1e1e;color:#f5f6f8;
  display:flex;flex-direction:column;height:100vh;
}

/* Bot bubble: có nền + chữ sáng để dễ đọc trên dark */
.message.bot{
  background:#222; color:#f5f6f8;
  align-self:flex-start; border-radius:14px;
  box-shadow:0 1px 4px rgba(0,0,0,.3);
  animation:fadeInUp .25s ease-out; padding:12px 16px; margin:8px 0; max-width:90%;
}

/* User bubble giữ như cũ */
.user{ background:#0084ff; color:#fff; align-self:flex-end; border-bottom-right-radius:4px; }

/* Sửa file preview */
#file-preview{ display:flex; align-items:center; margin-top:4px; }

/* Overlay: để mặc định ẩn bằng class, không đè hai display */
.image-viewer-overlay{ position:fixed; inset:0; background:rgba(0,0,0,.85);
  justify-content:center; align-items:center; z-index:1000; display:flex; }
.image-viewer-overlay.hidden{ display:none; }

/* Light mode (nếu thiết bị ở Light) */
@media (prefers-color-scheme: light){
  body{ background:#f8f9fb; color:#111; }
  .message.bot{ background:#f2f4f7; color:#111; box-shadow:0 1px 4px rgba(0,0,0,.1); }
  .user{ background:#0b63ff; color:#fff; }
  .chat-bar{ background:#fff; border:1px solid #e9ecef; }
  .chat-bar input{ color:#111; }
}
/* Light mặc định */
:root{
  --nl-text: #111;
  --nl-muted:#555;
  --nl-badge-bg:#00dafb;
  --nl-badge-text:#000;
}

@media (prefers-color-scheme: dark){
  :root{
    --nl-text:#f5f6f8;
    --nl-muted:#c9cbd1;
    --nl-badge-bg:#00e0ff;   /* hơi sáng hơn cho nền tối */
    --nl-badge-text:#001;
  }
}

.notice-lite{
  text-align:center;
  margin:6px 0 10px;
  font-size:12px;
  line-height:1.5;
  color:var(--nl-muted);
}
.notice-lite .product{
  font-weight:700;
  font-size:15px;
  color:var(--nl-text);
  margin-left:2px;
}
.notice-lite b{ color:var(--nl-text); }

.badge-beta{
  position:relative; display:inline-block;
  margin-right:6px; top:-2px;
  background:var(--nl-badge-bg); color:var(--nl-badge-text);
  font-size:9px; padding:2px 4px; border-radius:3px;
  transform:rotate(-15deg); font-weight:700;
}
#click-hint {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  font-size: 20px;
  z-index: 2000;
  animation: fadeIn 0.3s ease;
}

.hint-content {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 20px;
  background: rgba(0, 0, 0, 0.8);
  border-radius: 12px;
  box-shadow: 0 0 10px rgba(0, 230, 255, 0.4);
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
/* Nút gửi chung */
#send-btn {
  background: none;
  border: none;
  cursor: pointer;
  padding: 4px; /* giảm padding mặc định */
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Icon gửi bên trong */
#send-btn svg {
  width: 18px;
  height: 18px;
}

/* Mobile: thu nhỏ hơn */
@media (max-width: 768px) {
  #send-btn {
    padding: 2px;
  }
  #send-btn svg {
    width: 16px;
    height: 16px;
  }
}
#image-preview {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 8px;
}

#image-preview img {
  max-height: 60px;
  border-radius: 6px;
  object-fit: cover;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0,0,0,0.4);
}

#image-preview .img-wrapper {
  position: relative;
  display: inline-block;
}

#image-preview .remove-btn {
  position: absolute;
  top: -6px;
  right: -6px;
  background: #e74c3c;
  color: white;
  width: 18px;
  height: 18px;
  font-size: 13px;
  border-radius: 50%;
  line-height: 18px;
  text-align: center;
  cursor: pointer;
  box-shadow: 0 0 4px rgba(0,0,0,0.4);
}
.image-preview-container {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.img-wrapper {
  position: relative;
  display: inline-block;
}

.img-wrapper img {
  max-height: 60px;
  border-radius: 6px;
  object-fit: cover;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0,0,0,0.4);
}

.img-wrapper .remove-btn {
  position: absolute;
  top: -6px;
  right: -6px;
  background: #e74c3c;
  color: white;
  width: 18px;
  height: 18px;
  font-size: 13px;
  border-radius: 50%;
  line-height: 18px;
  text-align: center;
  cursor: pointer;
  box-shadow: 0 0 4px rgba(0,0,0,0.5);
}
@keyframes mic-pulse {
  0% { box-shadow: 0 0 0 0 rgba(0,230,118,0.7); }
  70% { box-shadow: 0 0 0 12px rgba(0,230,118,0); }
  100% { box-shadow: 0 0 0 0 rgba(0,230,118,0); }
}

#mic-wrapper.active {
  animation: mic-pulse 1.2s infinite;
  border: 2px solid #00e676;
  border-radius: 50%;
}
body.light {
  background: #f8f9fb;
  color: #111;
}

body.light .chat-bar {
  background: #fff;
  border: 1px solid #e9ecef;
}

body.light input {
  color: #111;
}

body.light .message.bot {
  background: #f2f4f7;
  color: #111;
}
#chat-input {
  overflow-y: hidden;
}.msg-imgs {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 6px;
}
.inline-img {
  max-width: 150px;
  border-radius: 8px;
  border: 1px solid #444;
}
